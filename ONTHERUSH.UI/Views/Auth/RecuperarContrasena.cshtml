@{
    ViewData["Title"] = "Recuperar contraseña";
}
@{
    ViewData["Title"] = "Recuperar contraseña";
}

<link rel="stylesheet" href="~/css/auth.css" />

<div class="auth-page">
    <div class="auth-card">

        <div class="auth-brand">
            <div class="auth-logo">ON</div>
            <div class="auth-brand-text">
                <div class="auth-app">ONTHERUSH</div>
                <div class="auth-sub">Recuperación de acceso</div>
            </div>
        </div>

        <div class="auth-header">
            <h2>Recuperar contraseña</h2>
            <p>
                Ingresá tu correo y te enviaremos un enlace para restablecer tu contraseña.
            </p>
        </div>

        @* Mensajes *@
        @if (ViewBag.Exito != null)
        {
            <div class="auth-alert auth-alert-success" role="alert">
                @ViewBag.Exito
            </div>
        }

        @if (ViewBag.Error != null)
        {
            <div class="auth-alert auth-alert-danger" role="alert">
                @ViewBag.Error
            </div>
        }

        <form asp-action="RecuperarContrasena" method="post" class="auth-form" id="frmRecuperar">
            @Html.AntiForgeryToken()

            <div class="auth-field">
                <label for="correo">Correo electrónico</label>
                <input type="email"
                       id="correo"
                       name="correo"
                       class="auth-input"
                       placeholder="usuario@correo.com"
                       autocomplete="email"
                       required />
                <div class="auth-hint">
                    Por seguridad, verás el mismo mensaje aunque el correo no exista.
                </div>
            </div>

            <button type="submit" class="auth-btn" id="btnEnviar">
                Enviar enlace
            </button>
        </form>

        <div class="auth-divider"></div>

        <div class="auth-footer">
            <a asp-controller="Auth" asp-action="Login" class="auth-link">
                Volver a iniciar sesión
            </a>
        </div>

        <div class="auth-copy">
            © @DateTime.Now.Year ONTHERUSH
        </div>

    </div>
</div>

@section Scripts {
<script>
    (function () {
        const form = document.getElementById('frmRecuperar');
        const btn = document.getElementById('btnEnviar');

        if (!form || !btn) return;

        form.addEventListener('submit', function () {
            btn.disabled = true;
            btn.textContent = 'Enviando...';
        });
    })();
</script>
}